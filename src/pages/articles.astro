---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import Grain from "../components/ui/Grain.astro";

const articles = await getCollection("articles", ({ data }) => {
  return import.meta.env.DEV || (!data.draft && data.publishedDate < new Date());
});
---

<Layout title="Articles" description="Articles by Eric Dew">
  <Grain />

  <h1 class="pt-8 text-center text-4xl font-extrabold">Articles</h1>
  <ul class="flex flex-wrap justify-center gap-4 p-16">
    {
      articles.map((article) => (
        <li>
          <a
            href={`/article/${article.slug}`}
            class="block max-w-sm rounded-lg border border-gray-200 bg-white p-6 shadow hover:bg-gray-100 dark:border-zinc-700 dark:bg-zinc-800 dark:hover:bg-zinc-700"
          >
            <h2 class="mb-2 text-2xl font-bold tracking-tight">{article.data.title}</h2>
            <small>
              <time datetime={article.data.publishedDate.toISOString()}>{article.data.publishedDate.toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric" })}</time>
            </small>
            <p class="pt-2 font-normal text-gray-700 dark:text-gray-400">{article.data.description}</p>
          </a>
        </li>
      ))
    }
  </ul>
</Layout>
